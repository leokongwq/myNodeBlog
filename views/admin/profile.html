{% extends 'layout.html' %}

{% block content %}

<div class="body container">
    <div class="typecho-page-title">
        <h2>个人设置</h2>
    </div>
    <div class="row typecho-page-main">
        <div class="col-mb-12 col-tb-3">
            <p><a href="#" title=""><img class="profile-avatar" src="/images/dftAvarta.jpg" alt="{{user.nickName}}" /></a></p>
            <h2>{{user.nickName}}</h2>
            <p>admin</p>
            <p>目前有 <em>{{totalPosts}}</em> 篇日志, 并有 <em>{{totalCom}}</em> 条关于你的评论在 <em>{{totalCate}}</em> 个分类中.</p>
            <p>最后登录: {{user.lastLogin}}</p>
        </div>

        <div class="col-mb-12 col-tb-6 col-tb-offset-1 typecho-content-panel" role="form">
            <section>
                <h3>个人资料</h3>
                <form action="/admin/profile" method="post">
                    <ul class="typecho-option" id="typecho-option-item-screenName-0">
                        <li>
                            <label class="typecho-label" for="screenName-0-1">
                                昵称</label>
                            <input id="screenName-0-1" name="nickName" type="text" class="text" value="{{user.nickName}}" />
                            <p class="description">
                                用户昵称可以与用户名不同, 用于前台显示.<br />如果你将此项留空, 将默认使用用户名.</p>
                        </li>
                    </ul>
                    <ul class="typecho-option" id="typecho-option-item-url-1">
                        <li>
                            <label class="typecho-label" for="url-0-2">
                                个人主页地址</label>
                            <input id="url-0-2" name="url" type="text" class="text" value="{{user.url}}" />
                            <p class="description">
                                此用户的个人主页地址, 请用 <code>http://</code> 开头.</p>
                        </li>
                    </ul>
                    <ul class="typecho-option" id="typecho-option-item-mail-2">
                        <li>
                            <label class="typecho-label" for="mail-0-3">
                                电子邮箱地址 *</label>
                            <input id="mail-0-3" name="mail" type="text" class="text" value="{{user.mail}}" />
                            <p class="description">
                                电子邮箱地址将作为此用户的主要联系方式.<br />请不要与系统中现有的电子邮箱地址重复.</p>
                        </li>
                    </ul>
                    <ul class="typecho-option" id="typecho-option-item-do-3" style="display:none">
                        <li>
                            <input name="do" type="hidden" value="profile" />
                        </li>
                    </ul>
                    <ul class="typecho-option typecho-option-submit" id="typecho-option-item-submit-4">
                        <li>
                            <button type="submit" class="btn primary">
                                更新我的档案</button>
                        </li>
                    </ul>
                </form>
            </section>

            <br>
            <section id="writing-option">
                <h3>撰写设置</h3>
                <form action="http://www.leokong.com/index.php/action/users-profile?_=07e1567f0bb0bacd1c99c6a4adef4e40" method="post" enctype="application/x-www-form-urlencoded">
                    <ul class="typecho-option" id="typecho-option-item-markdown-5">
                        <li>
                            <label class="typecho-label">
                                使用 Markdown 语法编辑和解析内容</label>
                            <span>
                            <input name="markdown" type="radio" value="0" id="markdown-0" />
                            <label for="markdown-0">
                                关闭</label>
                            </span>
                            <span>
                            <input name="markdown" type="radio" value="1" id="markdown-1" checked="true" />
                            <label for="markdown-1">
                                打开</label>
                            </span>
                            <p class="description">
                                使用 <a href="http://daringfireball.net/projects/markdown/">Markdown</a> 语法能够使您的撰写过程更加简便直观.<br />此功能开启不会影响以前没有使用 Markdown 语法编辑的内容.</p>
                        </li>
                    </ul>
                    <ul class="typecho-option" id="typecho-option-item-autoSave-6">
                        <li>
                            <label class="typecho-label">
                                自动保存</label>
                            <span>
                            <input name="autoSave" type="radio" value="0" id="autoSave-0" checked="true" />
                            <label for="autoSave-0">
                                关闭</label>
                            </span>
                            <span>
                            <input name="autoSave" type="radio" value="1" id="autoSave-1" />
                            <label for="autoSave-1">
                                打开</label>
                            </span>
                            <p class="description">
                                自动保存功能可以更好地保护你的文章不会丢失.</p>
                        </li>
                    </ul>
                    <ul class="typecho-option" id="typecho-option-item-defaultAllow-7">
                        <li>
                            <label class="typecho-label">
                                默认允许</label>
                            <span>
                            <input name="defaultAllow[]" type="checkbox" value="comment" id="defaultAllow-comment" checked="true" />
                            <label for="defaultAllow-comment">
                                可以被评论</label>
                            </span>
                            <span>
                            <input name="defaultAllow[]" type="checkbox" value="ping" id="defaultAllow-ping" checked="true" />
                            <label for="defaultAllow-ping">
                                可以被引用</label>
                            </span>
                            <span>
                            <input name="defaultAllow[]" type="checkbox" value="feed" id="defaultAllow-feed" checked="true" />
                            <label for="defaultAllow-feed">
                                出现在聚合中</label>
                            </span>
                            <p class="description">
                                设置你经常使用的默认允许权限</p>
                        </li>
                    </ul>
                    <ul class="typecho-option" id="typecho-option-item-do-8" style="display:none">
                        <li>
                            <input name="do" type="hidden" value="options" />
                        </li>
                    </ul>
                    <ul class="typecho-option typecho-option-submit" id="typecho-option-item-submit-9">
                        <li>
                            <button type="submit" class="btn primary">
                                保存设置</button>
                        </li>
                    </ul>
                </form>
            </section>

            <br>

            <section id="change-password">
                <h3>密码修改</h3>
                <form action="http://www.leokong.com/index.php/action/users-profile?_=07e1567f0bb0bacd1c99c6a4adef4e40" method="post" enctype="application/x-www-form-urlencoded">
                    <ul class="typecho-option" id="typecho-option-item-password-10">
                        <li>
                            <label class="typecho-label" for="password-0-11">
                                用户密码</label>
                            <input id="password-0-11" name="password" type="password" class="w-60" />
                            <p class="description">
                                为此用户分配一个密码.<br />建议使用特殊字符与字母、数字的混编样式,以增加系统安全性.</p>
                        </li>
                    </ul>
                    <ul class="typecho-option" id="typecho-option-item-confirm-11">
                        <li>
                            <label class="typecho-label" for="confirm-0-12">
                                用户密码确认</label>
                            <input id="confirm-0-12" name="confirm" type="password" class="w-60" />
                            <p class="description">
                                请确认你的密码, 与上面输入的密码保持一致.</p>
                        </li>
                    </ul>
                    <ul class="typecho-option" id="typecho-option-item-do-12" style="display:none">
                        <li>
                            <input name="do" type="hidden" value="password" />
                        </li>
                    </ul>
                    <ul class="typecho-option typecho-option-submit" id="typecho-option-item-submit-13">
                        <li>
                            <button type="submit" class="btn primary">
                                更新密码</button>
                        </li>
                    </ul>
                </form>
            </section>
        </div>
    </div>
</div>

{% endblock %}

{% block jsBlock %}
<script>
    (function () {
        $(document).ready(function() {

            // 导航菜单 tab 聚焦时展开下拉菜单
            (function () {
                $('#typecho-nav-list').find('.parent a').focus(function() {
                    $('#typecho-nav-list').find('.child').hide();
                    $(this).parents('.root').find('.child').show();
                });
                $('.operate').find('a').focus(function() {
                    $('#typecho-nav-list').find('.child').hide();
                });
            })();

            if ($('.typecho-login').length == 0) {
                $('a').each(function () {
                    var t = $(this), href = t.attr('href');

                    if ((href && href[0] == '#')
                            || /^http\:\/\/www\.leokong\.com\/admin\/.*$/.exec(href)
                            || /^http\:\/\/www\.leokong\.com\/index\\/action\/[_a-zA-Z0-9\/]+.*$/.exec(href)) {
                        return;
                    }

                    t.attr('target', '_blank');
                });
            }
        });
    })();
</script>
{% endblock %}