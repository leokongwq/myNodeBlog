<!DOCTYPE HTML>
<html class="no-js">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>{{page.title}} - 小沙弥'Blog</title>

    <!-- 使用url函数转换相关路径 -->
    <link rel="stylesheet" href="/stylesheets/font-awesome.min.css">
    <link rel="stylesheet" href="/stylesheets/base.css">
    <link rel="stylesheet" href="/stylesheets/style.css">
    <script src="/javascripts/jquery.min.js"></script>
    <script src="/javascripts/prettify.min.js"></script>
    <!--[if lt IE 9]>
    <script src="/javascripts/html5.min.js"></script>
    <script src="/javascripts/respond.min.js"></script>
    <![endif]-->

    <!-- 通过自有函数输出HTML头部信息 -->
    <style type="text/css">.testat-dialog{position:fixed;top:100px;left:50%;padding:10px;background-color:#fff;display:none;-webkit-border-radius: 3px;-moz-border-radius: 3px;border-radius: 3px;z-index:1024;}
    .testat-dialog.error{background-color:#f40;color:#fff;}
    .testat-dialog.success{background-color:#24AA42;color:#fff;}</style><script type="text/javascript">window.action="/action/";</script><meta name="description" content="为了更好的理解 exports 和 module.exports 的关系，我们先来补点 js 基础。示例：app.jsvar a = {name: 'nswbmw 1'};var b = a;c..." />
    <meta name="generator" content="Typecho 1.0/14.10.10" />
    <meta name="template" content="jianshu" />
    <link rel="pingback" href="/action/xmlrpc" />
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="/action/xmlrpc?rsd" />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/action/xmlrpc?wlw" />
    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed/2016/03/07/30.html" />
    <link rel="alternate" type="application/rdf+xml" title="RSS 1.0" href="/feed/rss/2016/03/07/30.html" />
    <link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/feed/atom/2016/03/07/30.html" />
    <script type="text/javascript">
        (function () {
            window.TypechoComment = {
                dom : function (id) {
                    return document.getElementById(id);
                },

                create : function (tag, attr) {
                    var el = document.createElement(tag);

                    for (var key in attr) {
                        el.setAttribute(key, attr[key]);
                    }

                    return el;
                },

                reply : function (cid, coid) {
                    var comment = this.dom(cid), parent = comment.parentNode,
                            response = this.dom('respond-post-{{page.id}}'), input = this.dom('comment-parent'),
                            form = 'form' == response.tagName ? response : response.getElementsByTagName('form')[0],
                            textarea = response.getElementsByTagName('textarea')[0];

                    if (null == input) {
                        input = this.create('input', {
                            'type' : 'hidden',
                            'name' : 'parent',
                            'id'   : 'comment-parent'
                        });

                        form.appendChild(input);
                    }

                    input.setAttribute('value', coid);

                    if (null == this.dom('comment-form-place-holder')) {
                        var holder = this.create('div', {
                            'id' : 'comment-form-place-holder'
                        });

                        response.parentNode.insertBefore(holder, response);
                    }

                    comment.appendChild(response);
                    this.dom('cancel-comment-reply-link').style.display = '';

                    if (null != textarea && 'text' == textarea.name) {
                        textarea.focus();
                    }

                    return false;
                },

                cancelReply : function () {
                    var response = this.dom('respond-post-30'),
                            holder = this.dom('comment-form-place-holder'), input = this.dom('comment-parent');

                    if (null != input) {
                        input.parentNode.removeChild(input);
                    }

                    if (null == holder) {
                        return true;
                    }

                    this.dom('cancel-comment-reply-link').style.display = 'none';
                    holder.parentNode.insertBefore(response, holder);
                    return false;
                }
            };
        })();
    </script>
    <script type="text/javascript">
        (function () {
            var event = document.addEventListener ? {
                add: 'addEventListener',
                focus: 'focus',
                load: 'DOMContentLoaded'
            } : {
                add: 'attachEvent',
                focus: 'onfocus',
                load: 'onload'
            };

            document[event.add](event.load, function () {
                var r = document.getElementById('respond-post-30');

                if (null != r) {
                    var forms = r.getElementsByTagName('form');
                    if (forms.length > 0) {
                        var f = forms[0], textarea = f.getElementsByTagName('textarea')[0], added = false;

                        if (null != textarea && 'text' == textarea.name) {
                            textarea[event.add](event.focus, function () {
                                if (!added) {
                                    var input = document.createElement('input');
                                    input.type = 'hidden';
                                    input.name = '_';
                                    input.value = (function () {
                                        var _M99vwk = ''///*'nnR'*/'nnR'
                                                +''///*'k4'*/'k4'
                                                +//'U'
                                                'c'+//'S'
                                                'cab'+'e'//'wJh'
                                                +/* 'P'//'P' */''+'1'//'H'
                                                +//'ev'
                                                'bfd'+'339'//'C'
                                                +'0'//'A'
                                                +//'6'
                                                '6'+'9f3'//'p'
                                                +'79'//'h'
                                                +''///*'Up'*/'Up'
                                                +//'3A'
                                                '3A'+//'w53'
                                                'a9'+'6'//'5'
                                                +'f25'//'IfY'
                                                +'4'//'MEy'
                                                +//'lY'
                                                '07'+''///*'g'*/'g'
                                                +//'P'
                                                '895'+''///*'0bm'*/'0bm'
                                                +//'Oah'
                                                '7', _ppz = [[19,21]];

                                        for (var i = 0; i < _ppz.length; i ++) {
                                            _M99vwk = _M99vwk.substring(0, _ppz[i][0]) + _M99vwk.substring(_ppz[i][1]);
                                        }

                                        return _M99vwk;
                                    })();

                                    f.appendChild(input);
                                    added = true;
                                }
                            });
                        }
                    }
                }
            });
        })();
    </script></head>
<body>
<!--[if lt IE 8]>
<div class="browsehappy" role="dialog">当前网页 <strong>不支持</strong> 你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.</div>
<![endif]-->
{% if user %}
<div class="navbar-user">
    <a class="login" href="/logout"> <i class="fa fa-sign-out"> </i> 退出</a>
    <a class="login" href="/admin/index"> <i class="fa fa-user"> </i> {{user.nickName}}</a>
    <a class="set-view-mode pull-right" data-mode="day" href="javascript:void(0)"> <i class="fa fa-moon-o"> </i> </a>
</div>
{% endif %}
{% if !user %}
<div class="navbar-user">
    <a class="login" href="/login"> <i class="fa fa-sign-in"> </i> 登录</a>
    <a class="set-view-mode pull-right" data-mode="day" href="javascript:void(0)"> <i class="fa fa-moon-o"> </i> </a>
</div>
{% endif %}

<div class="navbar navbar-jianshu">
    <div class="dropdown">
        <a class="logo" role="button" data-original-title="个人主页" data-container="div.expanded" href="/"> <b> 文 </b> <i class="fa fa-home"> </i> <span class="title"> 首页  </span> </a>
        <a href="/about.html" title="关于"><i class="fa fa-about"> </i> <span class="title"> 关于 </span> </a>
        <a href="/categories.html" title="分类"><i class="fa fa-categories"> </i> <span class="title"> 分类 </span> </a>
        <a href="/archives.html" title="存档"><i class="fa fa-archives"> </i> <span class="title"> 存档 </span> </a>
        <a href="/tags.html" title="标签"><i class="fa fa-tags"> </i> <span class="title"> 标签 </span> </a>
        <a href="/links.html" title="友链"><i class="fa fa-links"> </i> <span class="title"> 友链 </span> </a>
    </div>
</div>

<div class="row-fluid">
    <div class="span7 offset2 main">
        <div class="page-title clearfix">
            <ul class="navigation clearfix">
                <li><a href="/">首页</a> &raquo;</li>
                <!-- 页面为文章单页时 -->
                <li class="active"></li>
                <li class="search">
                    <form class="search-form" method="post" action="./" role="search">
                        <input type="text" name="s" class="text" placeholder="输入关键字搜索" autocomplete="off"/>
                        <button type="submit" class="btn s3"><i class="fa fa-search"></i></button>
                    </form>
                </li>
            </ul>
        </div>
        <div class="main-container">
            <article class="post preview" itemscope itemtype="http://schema.org/BlogPosting">
                {% block article %}
                {% endblock %}
            </article>
            <ul class="post-near">
                {% block postnear %}
                {% endblock %}
            </ul>
            <div id="comments">
                {% block comment %}
                {% endblock %}
            </div>
        </div>

        <script>
            $(function(){
                $(window).load(function(){
                    $("pre code").addClass("prettyprint");
                    prettyPrint();
                });
            })
        </script>
    </div>
</div>
<footer>
    <div class="footer-l">
        <p>
            <a href="/about.html" title="关于">关于</a> |
            <a href="/categories.html" title="分类">分类</a> |
            <a href="/archives.html" title="存档">存档</a> |
            <a href="/tags.html" title="标签">标签</a> |
            <a href="/links.html" title="友链">友链</a> |

            <a href="/feed/">文章 RSS</a> |
            <a href="/feed/comments/">评论 RSS</a>
        </p>
        <p> &copy; 2016 <a href="/" target="_blank"> 小沙弥'Blog </a>
            / Powered by <a href="http://www.typecho.org" target="_blank">Typecho</a>          </p>
    </div>
</footer>
<div class="fixed-btn">
    <a class="go-top" href="#" title="返回顶部"><i class="fa fa-chevron-up"></i></a>
    <a class="go-comments" href="#comments" title="评论"><i class="fa fa-comments"></i></a>
</div>
<script type="text/javascript">
    $(function(){
        $('.btn-like').click(function(e){
            e.stopPropagation();
            e.preventDefault();
            var that = $(this),num = $(this).data('num'), cid = $(this).data('cid'),numEl = that.find('.post-likes-num');
            if(cid===undefined) return false;
            $.get(window.action+'likes?cid='+cid).success(function(rs){
                if(rs.status==1){
                    if(numEl.length>0){
                        numEl.text(num+1);
                    }
                    testatAlert(rs.msg===undefined ? '已成功为该文章点赞!' : rs.msg);
                }else{
                    testatAlert(rs.msg===undefined ? '操作出错!' : rs.msg,'err');
                }
            });
        });
    });
    function testatAlert(msg,type,time){
        type = type === undefined ? 'success' : 'error';
        time = time === undefined ? (type=='success' ? 1500 : 3000) : time;
        var html = '<div class="testat-dialog '+type+'">'+msg+'</div>';
        $(html).appendTo($('body')).fadeIn(300,function(){
            setTimeout(function(){
                $('body > .testat-dialog').remove();
            },time);
        });
    }
</script><script>
    $(function(){
        $('.set-view-mode').click(function(){
            setReadMode($(this).data('mode'));
        });
        window.onload = function(){
            setReadMode();
        };
        $(window).scroll(function(){
            if($(this).scrollTop()>180) {
                $('.fixed-btn .go-top').fadeIn();
            }else{
                $('.fixed-btn .go-top').fadeOut();
            }
        });
        $('.go-top').click(function(){$('html,body').animate({scrollTop: '0px'}, 800);return false;});
        function setReadMode(mode){
            var btn = $('.set-view-mode');
            mode = mode===undefined ? getCookie('read-mode') : mode;
            if(mode=='day'){
                $('body').addClass('night-mode');
                btn.data('mode','night').find('i').attr('class','fa fa-sun-o');
            }else{
                if($('body').hasClass('night-mode')){
                    $('body').removeClass('night-mode');
                    btn.data('mode','day').find('i').attr('class','fa fa-moon-o');
                }
            }
            setCookie('read-mode',mode);
        }
        function setCookie(name,value){
            var Days = 30;
            var exp  = new Date();
            exp.setTime(exp.getTime() + Days*24*60*60*1000);
            document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString();
        }
        function getCookie(name) {
            var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
            if(arr=document.cookie.match(reg))
                return unescape(arr[2]);
            else
                return null;
        }
    });
</script>
</body>
</html>